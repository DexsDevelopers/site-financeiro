<?php
// teste_remocao_estatisticas.php - Teste para verificar a remo√ß√£o das estat√≠sticas da p√°gina principal

echo "<h1>üß™ TESTE DE REMO√á√ÉO DAS ESTAT√çSTICAS</h1>";
echo "<hr>";

// 1. Verificar se o arquivo tarefas.php existe
echo "<h2>1. Verifica√ß√£o do Arquivo Principal</h2>";
$tarefas_file = 'tarefas.php';
if (file_exists($tarefas_file)) {
    echo "‚úÖ <strong>{$tarefas_file}</strong> - Arquivo existe<br>";
    $tarefas_content = file_get_contents($tarefas_file);
} else {
    echo "‚ùå <strong>{$tarefas_file}</strong> - Arquivo N√ÉO existe<br>";
    $tarefas_content = '';
}

echo "<br><h2>2. Verifica√ß√£o da Remo√ß√£o do HTML das Estat√≠sticas</h2>";

// Verificar se a se√ß√£o de estat√≠sticas r√°pidas foi removida
if (strpos($tarefas_content, 'ESTAT√çSTICAS R√ÅPIDAS') !== false) {
    echo "‚ùå <strong>Se√ß√£o de Estat√≠sticas R√°pidas</strong> - AINDA PRESENTE (deve ser removida)<br>";
} else {
    echo "‚úÖ <strong>Se√ß√£o de Estat√≠sticas R√°pidas</strong> - Removida com sucesso<br>";
}

if (strpos($tarefas_content, 'stats-grid') !== false && strpos($tarefas_content, 'stat-card-small') === false) {
    echo "‚ùå <strong>Grid de Estat√≠sticas</strong> - AINDA PRESENTE (deve ser removido)<br>";
} else {
    echo "‚úÖ <strong>Grid de Estat√≠sticas</strong> - Removido com sucesso<br>";
}

echo "<br><h2>3. Verifica√ß√£o da Remo√ß√£o dos Estilos CSS</h2>";

// Verificar se os estilos das estat√≠sticas principais foram removidos
$estilos_removidos = [
    '.stats-grid' => 'Grid de estat√≠sticas',
    '.stat-card {' => 'Card de estat√≠stica',
    '.stat-icon {' => '√çcone de estat√≠stica',
    '.stat-content {' => 'Conte√∫do de estat√≠stica',
    '.stat-value {' => 'Valor de estat√≠stica',
    '.stat-label {' => 'Label de estat√≠stica',
    '.progress-ring' => 'Anel de progresso'
];

foreach ($estilos_removidos as $estilo => $descricao) {
    // Verificar se o estilo foi removido (n√£o deve conter a vers√£o sem -small)
    if (strpos($tarefas_content, $estilo) !== false) {
        // Se encontrou, verificar se n√£o √© a vers√£o -small
        if (strpos($estilo, '-small') === false && strpos($tarefas_content, str_replace('{', '-small', $estilo)) !== false) {
            echo "‚úÖ <strong>{$descricao}</strong> - Vers√£o principal removida (mantida vers√£o -small do modal)<br>";
        } else {
            echo "‚ùå <strong>{$descricao}</strong> - AINDA PRESENTE (deve ser removido)<br>";
        }
    } else {
        echo "‚úÖ <strong>{$descricao}</strong> - Removido com sucesso<br>";
    }
}

echo "<br><h2>4. Verifica√ß√£o dos Estilos do Modal (devem permanecer)</h2>";

// Verificar se os estilos do modal foram mantidos
$estilos_modal = [
    '.stat-card-small' => 'Card pequeno do modal',
    '.stat-icon-small' => '√çcone pequeno do modal',
    '.stat-content-small' => 'Conte√∫do pequeno do modal',
    '.stat-value-small' => 'Valor pequeno do modal',
    '.stat-label-small' => 'Label pequeno do modal'
];

foreach ($estilos_modal as $estilo => $descricao) {
    if (strpos($tarefas_content, $estilo) !== false) {
        echo "‚úÖ <strong>{$descricao}</strong> - Mantido para o modal<br>";
    } else {
        echo "‚ùå <strong>{$descricao}</strong> - N√ÉO encontrado (deve estar presente)<br>";
    }
}

echo "<br><h2>5. Verifica√ß√£o das Funcionalidades do Modal</h2>";

// Verificar se o modal de estat√≠sticas foi mantido
if (strpos($tarefas_content, 'modalEstatisticas') !== false) {
    echo "‚úÖ <strong>Modal de Estat√≠sticas</strong> - Mantido<br>";
} else {
    echo "‚ùå <strong>Modal de Estat√≠sticas</strong> - N√ÉO encontrado<br>";
}

if (strpos($tarefas_content, 'mostrarEstatisticas') !== false) {
    echo "‚úÖ <strong>Fun√ß√£o mostrarEstatisticas</strong> - Mantida<br>";
} else {
    echo "‚ùå <strong>Fun√ß√£o mostrarEstatisticas</strong> - N√ÉO encontrada<br>";
}

if (strpos($tarefas_content, 'carregarEstatisticas') !== false) {
    echo "‚úÖ <strong>Fun√ß√£o carregarEstatisticas</strong> - Mantida<br>";
} else {
    echo "‚ùå <strong>Fun√ß√£o carregarEstatisticas</strong> - N√ÉO encontrada<br>";
}

echo "<br><h2>6. Resumo da Estrutura Atual</h2>";
echo "<div style='background: #e7f3ff; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>üìã Estrutura da P√°gina de Tarefas:</h4>";
echo "<ol>";
echo "<li><strong>Header da P√°gina</strong> - T√≠tulo e subt√≠tulo</li>";
echo "<li><strong>Se√ß√£o Rotina Di√°ria</strong> - H√°bitos di√°rios integrados</li>";
echo "<li><strong>~~Estat√≠sticas R√°pidas~~</strong> - <span style='color: red;'>REMOVIDA</span></li>";
echo "<li><strong>Barra de Busca e Filtros</strong> - Pesquisa e filtros de tarefas</li>";
echo "<li><strong>Se√ß√£o Principal de Tarefas</strong> - Lista de tarefas com bot√£o de estat√≠sticas</li>";
echo "<li><strong>Modal de Estat√≠sticas</strong> - <span style='color: green;'>MANTIDO</span> (abre ao clicar no bot√£o)</li>";
echo "</ol>";
echo "</div>";

echo "<br><h2>7. Instru√ß√µes para Teste Manual</h2>";
echo "<div style='background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>üöÄ Como testar a remo√ß√£o:</h4>";
echo "<ol>";
echo "<li><strong>Acesse a p√°gina de tarefas:</strong> <a href='tarefas.php' target='_blank'>tarefas.php</a></li>";
echo "<li><strong>Verifique a estrutura:</strong></li>";
echo "    <ul>";
echo "        <li>T√≠tulo da p√°gina</li>";
echo "        <li>Se√ß√£o Rotina Di√°ria</li>";
echo "        <li><strong style='color: red;'>N√ÉO deve haver se√ß√£o de estat√≠sticas r√°pidas</strong></li>";
echo "        <li>Barra de busca e filtros</li>";
echo "        <li>Lista de tarefas</li>";
echo "    </ul>";
echo "<li><strong>Clique no bot√£o 'Estat√≠sticas':</strong> Deve abrir o modal completo</li>";
echo "<li><strong>Verifique o modal:</strong> Deve conter todas as estat√≠sticas detalhadas</li>";
echo "</ol>";
echo "</div>";

echo "<div style='background: #fff3cd; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>‚ö†Ô∏è Observa√ß√µes Importantes:</h4>";
echo "<ul>";
echo "<li>As estat√≠sticas r√°pidas foram removidas da p√°gina principal</li>";
echo "<li>O modal de estat√≠sticas foi mantido e funciona perfeitamente</li>";
echo "<li>O bot√£o 'Estat√≠sticas' est√° localizado ao lado do bot√£o 'Nova Tarefa'</li>";
echo "<li>Os dados s√£o carregados dinamicamente quando o modal √© aberto</li>";
echo "</ul>";
echo "</div>";

echo "<hr>";
echo "<p><strong>‚úÖ Teste de Remo√ß√£o das Estat√≠sticas conclu√≠do!</strong> Acesse <a href='tarefas.php'>tarefas.php</a> para verificar as mudan√ßas.</p>";
?>

