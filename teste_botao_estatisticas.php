<?php
// teste_botao_estatisticas.php - Teste para verificar o bot√£o de estat√≠sticas

echo "<h1>üß™ TESTE DO BOT√ÉO DE ESTAT√çSTICAS</h1>";
echo "<hr>";

// 1. Verificar se o arquivo tarefas.php foi modificado
echo "<h2>1. Verifica√ß√£o do Arquivo Principal</h2>";
$tarefas_file = 'tarefas.php';
if (file_exists($tarefas_file)) {
    echo "‚úÖ <strong>{$tarefas_file}</strong> - Arquivo existe<br>";
    $tarefas_content = file_get_contents($tarefas_file);
} else {
    echo "‚ùå <strong>{$tarefas_file}</strong> - Arquivo N√ÉO existe<br>";
    $tarefas_content = '';
}

echo "<br><h2>2. Verifica√ß√£o do Bot√£o de Estat√≠sticas</h2>";

// Verificar se o bot√£o foi adicionado
if (strpos($tarefas_content, 'mostrarEstatisticas()') !== false) {
    echo "‚úÖ <strong>Bot√£o de Estat√≠sticas</strong> - Implementado<br>";
} else {
    echo "‚ùå <strong>Bot√£o de Estat√≠sticas</strong> - N√ÉO encontrado<br>";
}

if (strpos($tarefas_content, 'modalEstatisticas') !== false) {
    echo "‚úÖ <strong>Modal de Estat√≠sticas</strong> - Implementado<br>";
} else {
    echo "‚ùå <strong>Modal de Estat√≠sticas</strong> - N√ÉO encontrado<br>";
}

echo "<br><h2>3. Verifica√ß√£o dos Arquivos de Suporte</h2>";

// Verificar arquivos PHP de suporte
$arquivos_suporte = [
    'buscar_tarefas_hoje.php' => 'Buscar tarefas de hoje',
    'buscar_distribuicao_prioridade.php' => 'Buscar distribui√ß√£o por prioridade',
    'buscar_produtividade_7_dias.php' => 'Buscar produtividade 7 dias'
];

foreach ($arquivos_suporte as $arquivo => $descricao) {
    if (file_exists($arquivo)) {
        echo "‚úÖ <strong>{$descricao}</strong> - Arquivo {$arquivo} existe<br>";
    } else {
        echo "‚ùå <strong>{$descricao}</strong> - Arquivo {$arquivo} N√ÉO existe<br>";
    }
}

echo "<br><h2>4. Verifica√ß√£o das Funcionalidades JavaScript</h2>";

// Verificar fun√ß√µes JavaScript
$funcoes_js = [
    'mostrarEstatisticas' => 'Fun√ß√£o para mostrar modal',
    'carregarEstatisticas' => 'Fun√ß√£o para carregar dados',
    'carregarTarefasHoje' => 'Fun√ß√£o para carregar tarefas de hoje',
    'carregarDistribuicaoPrioridade' => 'Fun√ß√£o para distribui√ß√£o por prioridade',
    'carregarGraficoProdutividade' => 'Fun√ß√£o para gr√°fico de produtividade'
];

foreach ($funcoes_js as $funcao => $descricao) {
    if (strpos($tarefas_content, "function {$funcao}") !== false) {
        echo "‚úÖ <strong>{$descricao}</strong> - Fun√ß√£o '{$funcao}' implementada<br>";
    } else {
        echo "‚ùå <strong>{$descricao}</strong> - Fun√ß√£o '{$funcao}' N√ÉO encontrada<br>";
    }
}

echo "<br><h2>5. Verifica√ß√£o dos Estilos CSS</h2>";

// Verificar estilos CSS
$estilos_css = [
    'stat-card-small' => 'Cards pequenos de estat√≠stica',
    'priority-card' => 'Cards de prioridade',
    'task-item-small' => 'Itens pequenos de tarefa',
    'productivity-chart' => 'Container do gr√°fico'
];

foreach ($estilos_css as $classe => $descricao) {
    if (strpos($tarefas_content, $classe) !== false) {
        echo "‚úÖ <strong>{$descricao}</strong> - Classe '{$classe}' implementada<br>";
    } else {
        echo "‚ùå <strong>{$descricao}</strong> - Classe '{$classe}' N√ÉO encontrada<br>";
    }
}

echo "<br><h2>6. Verifica√ß√£o do Chart.js</h2>";

// Verificar se Chart.js foi inclu√≠do
if (strpos($tarefas_content, 'chart.js') !== false) {
    echo "‚úÖ <strong>Chart.js</strong> - Biblioteca inclu√≠da<br>";
} else {
    echo "‚ùå <strong>Chart.js</strong> - Biblioteca N√ÉO inclu√≠da<br>";
}

echo "<br><h2>7. Instru√ß√µes para Teste Manual</h2>";
echo "<div style='background: #e7f3ff; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>üöÄ Como testar o bot√£o de estat√≠sticas:</h4>";
echo "<ol>";
echo "<li><strong>Acesse a p√°gina de tarefas:</strong> <a href='tarefas.php' target='_blank'>tarefas.php</a></li>";
echo "<li><strong>Localize o bot√£o:</strong> Procure pelo bot√£o 'Estat√≠sticas' ao lado do bot√£o 'Nova Tarefa'</li>";
echo "<li><strong>Clique no bot√£o:</strong> Deve abrir um modal com estat√≠sticas detalhadas</li>";
echo "<li><strong>Verifique as se√ß√µes:</strong></li>";
echo "    <ul>";
echo "        <li>Resumo Geral (cards com n√∫meros)</li>";
echo "        <li>Tarefas de Hoje (lista de tarefas)</li>";
echo "        <li>Distribui√ß√£o por Prioridade (gr√°ficos de barras)</li>";
echo "        <li>Gr√°fico de Produtividade (gr√°fico de linha dos √∫ltimos 7 dias)</li>";
echo "    </ul>";
echo "<li><strong>Teste a responsividade:</strong> Redimensione a janela para ver a adapta√ß√£o</li>";
echo "<li><strong>Teste o bot√£o Exportar:</strong> Deve mostrar uma mensagem de 'Em Desenvolvimento'</li>";
echo "</ol>";
echo "</div>";

echo "<br><h2>8. Funcionalidades Implementadas</h2>";
echo "<div style='background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>‚ú® Recursos do Bot√£o de Estat√≠sticas:</h4>";
echo "<ul>";
echo "<li><strong>üìä Resumo Geral:</strong> Cards com estat√≠sticas principais (conclu√≠das, pendentes, semana, tempo)</li>";
echo "<li><strong>üìã Tarefas de Hoje:</strong> Lista completa das tarefas do dia com status e prioridade</li>";
echo "<li><strong>üìà Distribui√ß√£o por Prioridade:</strong> Gr√°ficos de barras mostrando distribui√ß√£o Alta/M√©dia/Baixa</li>";
echo "<li><strong>üìä Gr√°fico de Produtividade:</strong> Gr√°fico de linha dos √∫ltimos 7 dias</li>";
echo "<li><strong>üé® Design Moderno:</strong> Modal responsivo com design consistente</li>";
echo "<li><strong>‚ö° Carregamento Din√¢mico:</strong> Dados carregados via AJAX em tempo real</li>";
echo "<li><strong>üì± Responsivo:</strong> Adapta-se perfeitamente a mobile e desktop</li>";
echo "<li><strong>üîí Seguro:</strong> Verifica√ß√£o de sess√£o e permiss√µes</li>";
echo "</ul>";
echo "</div>";

echo "<div style='background: #fff3cd; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>‚ö†Ô∏è Observa√ß√µes Importantes:</h4>";
echo "<ul>";
echo "<li>O modal s√≥ carrega dados quando √© aberto (otimiza√ß√£o de performance)</li>";
echo "<li>Os dados s√£o buscados em tempo real do banco de dados</li>";
echo "<li>O gr√°fico de produtividade mostra os √∫ltimos 7 dias</li>";
echo "<li>As tarefas de hoje incluem tanto pendentes quanto conclu√≠das</li>";
echo "<li>A distribui√ß√£o por prioridade considera apenas tarefas pendentes</li>";
echo "</ul>";
echo "</div>";

echo "<hr>";
echo "<p><strong>‚úÖ Teste do Bot√£o de Estat√≠sticas conclu√≠do!</strong> Acesse <a href='tarefas.php'>tarefas.php</a> para testar a funcionalidade.</p>";
?>
