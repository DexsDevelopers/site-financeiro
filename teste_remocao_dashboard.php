<?php
// teste_remocao_dashboard.php - Teste de remo√ß√£o dos elementos do dashboard

echo "<h2>üß™ TESTE DE REMO√á√ÉO DOS ELEMENTOS DO DASHBOARD</h2>";

// Verificar se o arquivo dashboard.php existe
if (!file_exists('dashboard.php')) {
    echo "‚ùå Arquivo dashboard.php n√£o encontrado<br>";
    exit();
}

echo "‚úÖ Arquivo dashboard.php encontrado<br><br>";

// Ler o conte√∫do do arquivo
$conteudo = file_get_contents('dashboard.php');

// Verificar se os elementos foram removidos
$elementos_removidos = [
    'Rotina Di√°ria' => [
        'texto' => 'Rotina Di√°ria',
        'classe' => 'rotina-list',
        'funcao' => 'toggleRotina'
    ],
    'Pomodoro Timer' => [
        'texto' => 'Pomodoro Timer',
        'classe' => 'timer-circle-dashboard',
        'funcao' => 'startPomodoroQuick'
    ],
    'Organiza√ß√£o por Hor√°rio' => [
        'texto' => 'Organiza√ß√£o por Hor√°rio',
        'classe' => 'periodo-card-dashboard',
        'funcao' => 'periodos'
    ]
];

echo "<h3>üîç VERIFICA√á√ÉO DOS ELEMENTOS REMOVIDOS</h3>";

$todos_removidos = true;

foreach ($elementos_removidos as $nome => $elementos) {
    echo "<h4>$nome</h4>";
    
    $removido = true;
    
    // Verificar texto
    if (strpos($conteudo, $elementos['texto']) !== false) {
        echo "‚ùå Texto '$elementos[texto]' ainda encontrado<br>";
        $removido = false;
    } else {
        echo "‚úÖ Texto '$elementos[texto]' removido<br>";
    }
    
    // Verificar classe CSS
    if (strpos($conteudo, $elementos['classe']) !== false) {
        echo "‚ùå Classe CSS '$elementos[classe]' ainda encontrada<br>";
        $removido = false;
    } else {
        echo "‚úÖ Classe CSS '$elementos[classe]' removida<br>";
    }
    
    // Verificar fun√ß√£o JavaScript
    if (strpos($conteudo, $elementos['funcao']) !== false) {
        echo "‚ùå Fun√ß√£o JavaScript '$elementos[funcao]' ainda encontrada<br>";
        $removido = false;
    } else {
        echo "‚úÖ Fun√ß√£o JavaScript '$elementos[funcao]' removida<br>";
    }
    
    if ($removido) {
        echo "‚úÖ <strong>$nome removido com sucesso!</strong><br>";
    } else {
        echo "‚ùå <strong>$nome ainda presente no c√≥digo</strong><br>";
        $todos_removidos = false;
    }
    
    echo "<hr>";
}

// Verificar se ainda existem refer√™ncias aos elementos
echo "<h3>üîç VERIFICA√á√ÉO DE REFER√äNCIAS RESTANTES</h3>";

$referencias_restantes = [
    'rotina_diaria.php',
    'pomodoro.php',
    'automatizacao_horario.php',
    'salvar_rotina_diaria.php',
    'criar_sessao_pomodoro.php'
];

$referencias_encontradas = [];

foreach ($referencias_restantes as $referencia) {
    if (strpos($conteudo, $referencia) !== false) {
        $referencias_encontradas[] = $referencia;
    }
}

if (empty($referencias_encontradas)) {
    echo "‚úÖ Nenhuma refer√™ncia aos arquivos removidos encontrada<br>";
} else {
    echo "‚ö†Ô∏è Refer√™ncias ainda encontradas:<br>";
    foreach ($referencias_encontradas as $ref) {
        echo "&nbsp;&nbsp;- $ref<br>";
    }
}

// Verificar estrutura do dashboard
echo "<h3>üìã VERIFICA√á√ÉO DA ESTRUTURA DO DASHBOARD</h3>";

$elementos_principais = [
    'Resumo do M√™s' => 'Resumo de',
    'Lan√ßamento R√°pido com IA' => 'Lan√ßamento R√°pido com IA',
    'Tarefas de Hoje' => 'Tarefas de Hoje',
    'Produtividade' => 'Produtividade',
    'Despesas por Categoria' => 'Despesas por Categoria',
    'Despesas Di√°rias' => 'Despesas Di√°rias',
    '√öltimos Lan√ßamentos' => '√öltimos Lan√ßamentos'
];

$elementos_presentes = 0;

foreach ($elementos_principais as $nome => $texto) {
    if (strpos($conteudo, $texto) !== false) {
        echo "‚úÖ $nome presente<br>";
        $elementos_presentes++;
    } else {
        echo "‚ùå $nome n√£o encontrado<br>";
    }
}

// Resumo final
echo "<h2>üìä RESUMO FINAL</h2>";

if ($todos_removidos) {
    echo "<div style='background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
    echo "<h4>‚úÖ Remo√ß√£o bem-sucedida!</h4>";
    echo "<p>Todos os elementos solicitados foram removidos do dashboard:</p>";
    echo "<ul>";
    echo "<li>‚úÖ Rotina Di√°ria</li>";
    echo "<li>‚úÖ Pomodoro Timer</li>";
    echo "<li>‚úÖ Organiza√ß√£o por Hor√°rio</li>";
    echo "</ul>";
    echo "<p>O dashboard agora cont√©m apenas os elementos principais de finan√ßas e tarefas.</p>";
    echo "</div>";
} else {
    echo "<div style='background: #f8d7da; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
    echo "<h4>‚ùå Remo√ß√£o incompleta</h4>";
    echo "<p>Alguns elementos ainda est√£o presentes no c√≥digo. Verifique os itens marcados com ‚ùå acima.</p>";
    echo "</div>";
}

echo "<p><strong>Elementos principais presentes: $elementos_presentes/" . count($elementos_principais) . "</strong></p>";

echo "<hr>";
echo "<p><strong>‚úÖ Teste conclu√≠do!</strong> Verifique os resultados acima.</p>";
?>
