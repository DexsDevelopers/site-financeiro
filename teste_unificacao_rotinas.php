<?php
// teste_unificacao_rotinas.php - Teste para verificar a unifica√ß√£o das rotinas

echo "<h1>üß™ TESTE DE UNIFICA√á√ÉO DAS ROTINAS</h1>";
echo "<hr>";

// 1. Verificar se o arquivo rotina_diaria.php foi removido
echo "<h2>1. Verifica√ß√£o de Remo√ß√£o</h2>";

if (!file_exists('rotina_diaria.php')) {
    echo "‚úÖ <strong>rotina_diaria.php</strong> - Arquivo removido com sucesso<br>";
} else {
    echo "‚ùå <strong>rotina_diaria.php</strong> - Arquivo ainda existe<br>";
}

// 2. Verificar se tarefas.php foi modificado
echo "<h2>2. Verifica√ß√£o de Integra√ß√£o</h2>";

if (file_exists('tarefas.php')) {
    $content = file_get_contents('tarefas.php');
    
    if (strpos($content, 'ROTINA DI√ÅRIA INTEGRADA') !== false) {
        echo "‚úÖ <strong>Se√ß√£o de rotina di√°ria</strong> - Integrada em tarefas.php<br>";
    } else {
        echo "‚ùå <strong>Se√ß√£o de rotina di√°ria</strong> - N√ÉO encontrada em tarefas.php<br>";
    }
    
    if (strpos($content, 'toggleRotina') !== false) {
        echo "‚úÖ <strong>Fun√ß√£o toggleRotina</strong> - Implementada<br>";
    } else {
        echo "‚ùå <strong>Fun√ß√£o toggleRotina</strong> - N√ÉO encontrada<br>";
    }
    
    if (strpos($content, 'adicionarHabit') !== false) {
        echo "‚úÖ <strong>Fun√ß√£o adicionarHabit</strong> - Implementada<br>";
    } else {
        echo "‚ùå <strong>Fun√ß√£o adicionarHabit</strong> - N√ÉO encontrada<br>";
    }
    
    if (strpos($content, 'rotina-card') !== false) {
        echo "‚úÖ <strong>Estilos CSS</strong> - Implementados<br>";
    } else {
        echo "‚ùå <strong>Estilos CSS</strong> - N√ÉO encontrados<br>";
    }
} else {
    echo "‚ùå <strong>tarefas.php</strong> - Arquivo n√£o encontrado<br>";
}

// 3. Verificar configura√ß√£o do menu
echo "<h2>3. Verifica√ß√£o do Menu</h2>";

if (file_exists('includes/load_menu_config.php')) {
    $menuContent = file_get_contents('includes/load_menu_config.php');
    
    if (strpos($menuContent, 'rotina_diaria.php') === false) {
        echo "‚úÖ <strong>Menu de produtividade</strong> - rotina_diaria.php removido<br>";
    } else {
        echo "‚ùå <strong>Menu de produtividade</strong> - rotina_diaria.php ainda presente<br>";
    }
    
    if (strpos($menuContent, "'produtividade' => ['tarefas.php', 'calendario.php', 'temporizador.php', 'pomodoro.php', 'automatizacao_horario.php']") !== false) {
        echo "‚úÖ <strong>Configura√ß√£o do menu</strong> - Atualizada corretamente<br>";
    } else {
        echo "‚ùå <strong>Configura√ß√£o do menu</strong> - N√ÉO atualizada<br>";
    }
} else {
    echo "‚ùå <strong>includes/load_menu_config.php</strong> - Arquivo n√£o encontrado<br>";
}

// 4. Verificar arquivos de suporte
echo "<h2>4. Verifica√ß√£o de Arquivos de Suporte</h2>";

$arquivosSuporte = [
    'adicionar_rotina_diaria.php',
    'salvar_rotina_diaria.php'
];

foreach ($arquivosSuporte as $arquivo) {
    if (file_exists($arquivo)) {
        echo "‚úÖ <strong>{$arquivo}</strong> - Arquivo existe<br>";
    } else {
        echo "‚ùå <strong>{$arquivo}</strong> - Arquivo N√ÉO existe<br>";
    }
}

// 5. Instru√ß√µes de teste
echo "<h2>5. Instru√ß√µes para Teste Manual</h2>";
echo "<div style='background: #e7f3ff; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>üöÄ Como testar a unifica√ß√£o:</h4>";
echo "<ol>";
echo "<li><strong>Acesse a p√°gina de tarefas:</strong> <a href='tarefas.php' target='_blank'>tarefas.php</a></li>";
echo "<li><strong>Verifique a se√ß√£o de rotina di√°ria:</strong> Deve aparecer no topo da p√°gina</li>";
echo "<li><strong>Teste as funcionalidades:</strong></li>";
echo "    <ul>";
echo "        <li>Clique nos h√°bitos para marcar como conclu√≠do</li>";
echo "        <li>Clique em 'Adicionar H√°bito' para criar novos h√°bitos</li>";
echo "        <li>Verifique o progresso circular</li>";
echo "    </ul>";
echo "<li><strong>Verifique o menu:</strong> Acesse a se√ß√£o 'Produtividade' e confirme que 'Rotina Di√°ria' n√£o aparece mais</li>";
echo "<li><strong>Teste a responsividade:</strong> Verifique se funciona bem no mobile</li>";
echo "</ol>";
echo "</div>";

// 6. Status da unifica√ß√£o
echo "<h2>6. Status da Unifica√ß√£o</h2>";
echo "<div style='background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>‚úÖ Unifica√ß√£o Realizada:</h4>";
echo "<ul>";
echo "<li><strong>Funcionalidades integradas:</strong> Rotina di√°ria agora faz parte da p√°gina de tarefas</li>";
echo "<li><strong>Menu atualizado:</strong> 'Rotina Di√°ria' removido do menu de produtividade</li>";
echo "<li><strong>Arquivo removido:</strong> rotina_diaria.php deletado</li>";
echo "<li><strong>Design unificado:</strong> Estilos consistentes entre rotina e tarefas</li>";
echo "<li><strong>Funcionalidades preservadas:</strong> Todas as funcionalidades da rotina di√°ria mantidas</li>";
echo "</ul>";
echo "</div>";

echo "<div style='background: #fff3cd; padding: 1rem; border-radius: 8px; margin: 1rem 0;'>";
echo "<h4>‚ö†Ô∏è Observa√ß√µes:</h4>";
echo "<ul>";
echo "<li>A se√ß√£o de rotina di√°ria s√≥ aparece se houver h√°bitos configurados</li>";
echo "<li>Os h√°bitos s√£o criados automaticamente baseados na configura√ß√£o padr√£o</li>";
echo "<li>O progresso √© calculado automaticamente baseado nos h√°bitos conclu√≠dos</li>";
echo "<li>Todas as funcionalidades de AJAX foram preservadas</li>";
echo "</ul>";
echo "</div>";

echo "<hr>";
echo "<p><strong>‚úÖ Unifica√ß√£o conclu√≠da!</strong> A rotina di√°ria agora est√° integrada na p√°gina de tarefas e o menu foi atualizado.</p>";
?>
